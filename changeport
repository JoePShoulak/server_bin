#!/bin/bash

# Check if both arguments are provided
if [ $# -ne 2 ]; then
  echo "Usage: $0 <folder_containing_compose.yml> <new_port>"
  exit 1
fi

# Arguments
folder=$1
new_port=$2
file="$HOME/minecraft/$folder/compose.yml"

# Check if the file exists
if [ ! -f "$file" ]; then
  echo "Error: File '$file' does not exist."
  exit 1
fi

# Check if the new port is a valid number
if ! [[ "$new_port" =~ ^[0-9]+$ ]]; then
  echo "Error: New port must be a valid number."
  exit 1
fi

# Replace the first 25565 in "25565:25565" with the new port
sed -i "0,/25565:/{s/25565:/$new_port:/}" "$file"

# Confirmation message
echo "The port in '$file' has been updated to '$new_port'."

